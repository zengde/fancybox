// ==================================================
// fancyBox v3.5.7
//
// Licensed GPLv3 for open source use
// or fancyBox Commercial License for commercial use
//
// http://github.com/zengde/fancybox.js/
// Copyright 2019 fancyApps
//
// ==================================================
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var s=0;s<e.length;s++){var i=e[s];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function _createClass(t,e,s){return e&&_defineProperties(t.prototype,e),s&&_defineProperties(t,s),t}var TinyGesture=function(){function t(e,s){_classCallCheck(this,t),s=Object.assign({},t.defaults,s),this.element=e,this.opts=s,this.touchStartX=null,this.touchStartY=null,this.touchEndX=null,this.touchEndY=null,this.velocityX=null,this.velocityY=null,this.longPressTimer=null,this.doubleTapWaiting=!1,this.handlers={panstart:[],panmove:[],panend:[],swipeleft:[],swiperight:[],swipeup:[],swipedown:[],tap:[],doubletap:[],longpress:[]},this._onTouchStart=this.onTouchStart.bind(this),this._onTouchMove=this.onTouchMove.bind(this),this._onTouchEnd=this.onTouchEnd.bind(this),this.element.addEventListener("touchstart",this._onTouchStart,passiveIfSupported),this.element.addEventListener("touchmove",this._onTouchMove,passiveIfSupported),this.element.addEventListener("touchend",this._onTouchEnd,passiveIfSupported),!this.opts.mouseSupport||"ontouchstart"in window||(this.element.addEventListener("mousedown",this._onTouchStart,passiveIfSupported),document.addEventListener("mousemove",this._onTouchMove,passiveIfSupported),document.addEventListener("mouseup",this._onTouchEnd,passiveIfSupported))}return _createClass(t,[{key:"destroy",value:function(){this.element.removeEventListener("touchstart",this._onTouchStart),this.element.removeEventListener("touchmove",this._onTouchMove),this.element.removeEventListener("touchend",this._onTouchEnd),this.element.removeEventListener("mousedown",this._onTouchStart),document.removeEventListener("mousemove",this._onTouchMove),document.removeEventListener("mouseup",this._onTouchEnd),clearTimeout(this.longPressTimer),clearTimeout(this.doubleTapTimer)}},{key:"on",value:function(t,e){var s=this;if(this.handlers[t])return this.handlers[t].push(e),{type:t,fn:e,cancel:function(){return s.off(t,e)}}}},{key:"off",value:function(t,e){if(this.handlers[t]){var s=this.handlers[t].indexOf(e);-1!==s&&this.handlers[t].splice(s,1)}}},{key:"fire",value:function(t,e){for(var s=0;s<this.handlers[t].length;s++)this.handlers[t][s](e)}},{key:"onTouchStart",value:function(t){var e=this;this.thresholdX=this.opts.threshold("x",this),this.thresholdY=this.opts.threshold("y",this),this.disregardVelocityThresholdX=this.opts.disregardVelocityThreshold("x",this),this.disregardVelocityThresholdY=this.opts.disregardVelocityThreshold("y",this),this.touchStartX="mousedown"===t.type?t.screenX:t.changedTouches[0].screenX,this.touchStartY="mousedown"===t.type?t.screenY:t.changedTouches[0].screenY,this.touchMoveX=null,this.touchMoveY=null,this.touchEndX=null,this.touchEndY=null,this.longPressTimer=setTimeout(function(){return e.fire("longpress",t)},this.opts.longPressTime),this.fire("panstart",t)}},{key:"onTouchMove",value:function(t){if("mousemove"!==t.type||this.touchStartX&&null===this.touchEndX){var e=("mousemove"===t.type?t.screenX:t.changedTouches[0].screenX)-this.touchStartX;this.velocityX=e-this.touchMoveX,this.touchMoveX=e;var s=("mousemove"===t.type?t.screenY:t.changedTouches[0].screenY)-this.touchStartY;this.velocityY=s-this.touchMoveY,this.touchMoveY=s;var i=Math.abs(this.touchMoveX),o=Math.abs(this.touchMoveY);this.swipingHorizontal=i>this.thresholdX,this.swipingVertical=o>this.thresholdY,this.swipingDirection=i>o?this.swipingHorizontal?"horizontal":"pre-horizontal":this.swipingVertical?"vertical":"pre-vertical",Math.max(i,o)>this.opts.pressThreshold&&clearTimeout(this.longPressTimer),this.fire("panmove",t)}}},{key:"onTouchEnd",value:function(t){var e=this;if("mouseup"!==t.type||this.touchStartX&&null===this.touchEndX){this.touchEndX="mouseup"===t.type?t.screenX:t.changedTouches[0].screenX,this.touchEndY="mouseup"===t.type?t.screenY:t.changedTouches[0].screenY,this.fire("panend",t),clearTimeout(this.longPressTimer);var s=this.touchEndX-this.touchStartX,i=Math.abs(s),o=this.touchEndY-this.touchStartY,h=Math.abs(o);i>this.thresholdX||h>this.thresholdY?(this.swipedHorizontal=this.opts.diagonalSwipes?Math.abs(s/o)<=this.opts.diagonalLimit:i>=h&&i>this.thresholdX,this.swipedVertical=this.opts.diagonalSwipes?Math.abs(o/s)<=this.opts.diagonalLimit:h>i&&h>this.thresholdY,this.swipedHorizontal&&(s<0?(this.velocityX<-this.opts.velocityThreshold||s<-this.disregardVelocityThresholdX)&&this.fire("swipeleft",t):(this.velocityX>this.opts.velocityThreshold||s>this.disregardVelocityThresholdX)&&this.fire("swiperight",t)),this.swipedVertical&&(o<0?(this.velocityY<-this.opts.velocityThreshold||o<-this.disregardVelocityThresholdY)&&this.fire("swipeup",t):(this.velocityY>this.opts.velocityThreshold||o>this.disregardVelocityThresholdY)&&this.fire("swipedown",t))):i<this.opts.pressThreshold&&h<this.opts.pressThreshold&&(this.doubleTapWaiting?(this.doubleTapWaiting=!1,clearTimeout(this.doubleTapTimer),this.fire("doubletap",t)):(this.doubleTapWaiting=!0,this.doubleTapTimer=setTimeout(function(){return e.doubleTapWaiting=!1},this.opts.doubleTapTime),this.fire("tap",t)))}}}]),t}();TinyGesture.defaults={threshold:function(t,e){return Math.max(25,Math.floor(.15*("x"===t?window.innerWidth||document.body.clientWidth:window.innerHeight||document.body.clientHeight)))},velocityThreshold:10,disregardVelocityThreshold:function(t,e){return Math.floor(.5*("x"===t?e.element.clientWidth:e.element.clientHeight))},pressThreshold:8,diagonalSwipes:!1,diagonalLimit:Math.tan(.375*Math.PI),longPressTime:500,doubleTapTime:300,mouseSupport:!0};var passiveIfSupported=!1;try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){passiveIfSupported={passive:!0}}}))}catch(t){}!function(t){FancyUtils.on(t,"onInit.fb",function(t,e,s){var i=e.$refs.stage,o=i.getBoundingClientRect(),h=o.left,n=o.top,r=new TinyGesture(i);r.on("panmove",function(t){var e=r.touchMoveX+h;i.style.transform="translate(".concat(e,"px, ").concat(n,"px)")}),r.on("panend",function(t){"horizontal"===r.swipingDirection&&r.touchMoveX<0?e.next():e.previous()}),FancyUtils.on(e.$refs.container,"onUpdate.fb",function(t,s,o){-1==o&&(o=0),o==e.group.length&&(o=e.group.length-1);var r=e.counterMap[o];h=window.innerWidth*r*-1,i.style.transform="translate(".concat(h,"px, ").concat(n,"px)")})})}(document);