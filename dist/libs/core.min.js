// ==================================================
// fancyBox v3.5.7
//
// Licensed GPLv3 for open source use
// or fancyBox Commercial License for commercial use
//
// http://github.com/zengde/fancybox.js/
// Copyright 2019 fancyApps
//
// ==================================================
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}var FancyUtils={on:function(t,e,n,r){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];n&&"string"!=typeof n&&(r=n,n=void 0),e.split(" ").forEach(function(e){(n||r.length>1)&&(r=function(t,e){return function(n){var r=!0;t&&(r=n.path.some(function(e,n){return!(!e.nodeType||9==e.nodeType)&&e.matches(t)}));if(r){var i=e.length>1?n.detail:["fake"];e.apply(void 0,[n].concat(_toConsumableArray(i)))}}}(n,r)),t.addEventListener(e.split(".")[0],r,{passive:!1,once:i})})},trigger:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=new CustomEvent(e.split(".")[0],{detail:n,bubbles:!0});t.dispatchEvent(r)},isFunction:function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},translate:function(t,e){var n=t.opts.i18n[t.opts.lang]||t.opts.i18n.en;return e.replace(/\{\{(\w+)\}\}/g,function(t,e){return void 0===n[e]?t:n[e]})}},FancyData={uid:0},FancyBox=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;_classCallCheck(this,t),_defineProperty(this,"isVisible",!0),_defineProperty(this,"currPos",0),_defineProperty(this,"$refs",{}),_defineProperty(this,"slides",{}),_defineProperty(this,"counter",0),_defineProperty(this,"counterMap",{}),this.group=e,this.opts=Object.assign({},FancyDefaults,n),this.id=this.opts.id||FancyData.uid++,this.currPos=r,this.init()}return _createClass(t,[{key:"init",value:function(){var t=this,e=document.querySelector(this.opts.parentEl);e.insertAdjacentHTML("beforeend",this.opts.baseTpl);var n=e.lastChild;n.dataset.id=this.id,FancyData[this.id]=this,this.$refs.container=n,n.classList.add("fancybox-is-open"),["bg","inner","infobar","toolbar","stage","caption","navigation"].forEach(function(e){t.$refs[e]=n.querySelector(".fancybox-"+e)}),this.trigger("onInit"),this.addEvents(),this.jumpTo(this.currPos)}},{key:"addEvents",value:function(){var t=this;FancyUtils.on(t.$refs.container,"click.fb-close","[data-fancybox-close]",function(e){e.stopPropagation(),e.preventDefault(),t.close()}),FancyUtils.on(t.$refs.container,"touchstart.fb-prev click.fb-prev","[data-fancybox-prev]",function(e){e.stopPropagation(),e.preventDefault(),t.previous()}),FancyUtils.on(t.$refs.container,"touchstart.fb-next click.fb-next","[data-fancybox-next]",function(e){e.stopPropagation(),e.preventDefault(),t.next()}),FancyUtils.on(t.$refs.container,"click.fb","[data-fancybox-zoom]",function(e){t[t.isScaledDown()?"scaleToActual":"scaleToFit"]()})}},{key:"removeEvents",value:function(){}},{key:"trigger",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];n.unshift(this);var i=!0;if(FancyUtils.isFunction(this.opts[t])&&(i=this.opts[t].apply(this,n)),!1===i)return i;var a="afterClose"===t?document:this.$refs.container;FancyUtils.trigger(a,t+".fb",n)}},{key:"close",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.$refs.container.style.display="none",t&&this.destroy()}},{key:"destroy",value:function(){var t=this;this.$refs.container.remove(),Object.keys(this.$refs).forEach(function(e){t.$refs[e]=null}),FancyData[this.id]=null}},{key:"render",value:function(){var t=this.current.opts;this.$refs.infobar.querySelector("[data-fancybox-index]").textContent=this.currIndex+1,this.$refs.infobar.querySelector("[data-fancybox-count]").textContent=this.group.length,this.$refs.caption.querySelector(".fancybox-caption__body").textContent=t.caption;var e=t.buttons,n="";e.forEach(function(e){n+=t.btnTpl[e]?t.btnTpl[e]:""}),this.$refs.toolbar.innerHTML=n,t.arrows&&(this.$refs.navigation.innerHTML=t.btnTpl.arrowLeft+t.btnTpl.arrowRight),this.showControls(),this.loadSlide(this.currIndex),this.opts.touch&&(this.loadSlide(this.currPos-1),this.loadSlide(this.currPos+1))}},{key:"showControls",value:function(){var t=this,e=this.current.opts,n={"fancybox-show-toolbar":!(!e.toolbar||!e.buttons),"fancybox-show-infobar":!!(e.infobar&&this.group.length>1),"fancybox-show-caption":!!e.caption,"fancybox-show-nav":!!(e.arrows&&this.group.length>1),"fancybox-is-modal":!!e.modal};Object.entries(n).forEach(function(e,n){var r;(r=t.$refs.container.classList).toggle.apply(r,_toConsumableArray(e))})}},{key:"loadSlide",value:function(t){var e=this;if(!(t<0||t>=this.group.length)){if(!1===this.trigger("beforeLoad"))return!1;var n=this.$refs.container,r=this.getItem(t);r.opts.type||this.trigger("objectNeedsType",r);var i=r.opts.type,a={};if(a.$slide=this.$refs.stage.querySelector('.fancybox-slide[data-index="'.concat(t,'"]')),!a.$slide){switch(a.$slide=document.createElement("div"),a.$slide.className="fancybox-slide fancybox-slide--".concat(i),a.$slide.dataset.index=t,i){case"image":a.$content=document.createElement("div"),a.$content.className="fancybox-content",a.$slide.appendChild(a.$content);var o=document.createElement("img");o.className="fancybox-image",o.src=r.src,o.onload=function(){var t=(n.clientWidth-o.naturalWidth)/2,r=(n.clientHeight-o.naturalHeight)/2;a.$slide.classList.add("fancybox-slide--complete");var i={transform:"translate(".concat(t,"px, ").concat(r,"px)"),width:o.naturalWidth+"px",height:o.naturalHeight+"px"};Object.assign(a.$content.style,i),e.trigger("afterLoad",a)},a.$content.appendChild(o);break;case"html":a.$slide.innerHTML=r.src,a.$slide.classList.add("fancybox-slide--complete"),a.$content=a.$slide.firstElementChild,a.$content.classList.add("fancybox-content"),this.trigger("afterLoad",a);break;case"iframe":a.$content=document.createElement("div"),a.$content.className="fancybox-content",Object.assign(a.$content.style,r.opts.iframe.css),a.$slide.appendChild(a.$content),a.$content.insertAdjacentHTML("beforeend",this.opts.iframe.tpl.replace(/\{rnd\}/g,(new Date).getTime())),a.$iframe=a.$content.firstElementChild,Object.entries(this.opts.iframe.attr).forEach(function(t){var e;return(e=a.$iframe).setAttribute.apply(e,_toConsumableArray(t))}),this.trigger("afterLoad",a),a.$iframe.src=r.src}this.$refs.stage.appendChild(a.$slide)}a.$slide.classList.toggle("fancybox-slide--current",t==this.currIndex)}}},{key:"next",value:function(){this.currIndex++}},{key:"previous",value:function(){this.currIndex--}},{key:"jumpTo",value:function(t){this.currIndex=t}},{key:"getItem",value:function(t){if(!this.slides[t]){var e=this.group[t];e.opts=Object.assign({},this.opts,e.opts),this.slides[t]=e,this.counterMap[t]=this.counter++}return this.slides[t]}},{key:"current",get:function(){return this.getItem(this.currIndex)}},{key:"classObject",get:function(){var t=["fancybox-container"];return this.isVisible&&t.push("fancybox-is-open"),t.join(" ")}},{key:"currIndex",get:function(){return this.currPos},set:function(t){this.trigger("onUpdate",t),t<0||t>=this.group.length||(this.currPos=t,this.render())}}],[{key:"open",value:function(e,n,r){new t(e,n,r)}},{key:"getInstance",value:function(e){var n=document.querySelector(".fancybox-container:not(.fancybox-is-closing):last-child");if(!n)return!1;var r=n.dataset.id,i=FancyData[r];if(i instanceof t){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];return"string"==typeof e?i[e].apply(i,o):FancyUtils.isFunction(e)&&e.apply(i,o),i}return!1}}]),t}();